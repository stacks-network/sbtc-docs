<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>sBTC Requests and Responses - sBTC Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction to sBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guides</li><li class="chapter-item expanded "><a href="how-to-deposit-and-withdraw.html"><strong aria-hidden="true">1.</strong> How to Deposit and Withdraw</a></li><li class="chapter-item expanded "><a href="how-to-stacker.html"><strong aria-hidden="true">2.</strong> How to Participate as a Stacker</a></li><li class="chapter-item expanded "><a href="how-to-signer.html"><strong aria-hidden="true">3.</strong> How to Operate a Signer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="how-to-signer-config.html"><strong aria-hidden="true">3.1.</strong> Signer Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="applications.html"><strong aria-hidden="true">4.</strong> Applications on sBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">Developer Guides</li><li class="chapter-item expanded "><a href="quickstart.html"><strong aria-hidden="true">5.</strong> Developer Quickstart</a></li><li class="chapter-item expanded "><a href="deposit.html"><strong aria-hidden="true">6.</strong> Initiating a Deposit</a></li><li class="chapter-item expanded "><a href="withdrawal.html"><strong aria-hidden="true">7.</strong> Initiating a Withdrawal</a></li><li class="chapter-item expanded "><a href="sbtc-sdk.html"><strong aria-hidden="true">8.</strong> The sBTC SDK</a></li><li class="chapter-item expanded affix "><li class="part-title">sBTC Design</li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">9.</strong> Architecture Overview</a></li><li class="chapter-item expanded "><a href="sbtc-operations.html" class="active"><strong aria-hidden="true">10.</strong> sBTC Requests and Responses</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-operations/bitcoin-transactions.html"><strong aria-hidden="true">10.1.</strong> Bitcoin Transactions</a></li><li class="chapter-item expanded "><a href="sbtc-operations/commit-reveal-system.html"><strong aria-hidden="true">10.2.</strong> The Commit-Reveal System</a></li></ol></li><li class="chapter-item expanded "><a href="pox-contract.html"><strong aria-hidden="true">11.</strong> The PoX Contract</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities.html"><strong aria-hidden="true">12.</strong> Stacker responsibilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="stacker-responsibilities/frost.html"><strong aria-hidden="true">12.1.</strong> Signature Aggregation with FROST</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities/wsts-adaptation.html"><strong aria-hidden="true">12.2.</strong> WSTS Adaptation</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities/signing-protocol.html"><strong aria-hidden="true">12.3.</strong> Signing Protocol</a></li><li class="chapter-item expanded "><a href="stacker-db.html"><strong aria-hidden="true">12.4.</strong> StackerDB</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">sBTC Project</li><li class="chapter-item expanded "><a href="sbtc-releases.html"><strong aria-hidden="true">13.</strong> sBTC Releases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-alpha.html"><strong aria-hidden="true">13.1.</strong> sBTC 0.0.1</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev.html"><strong aria-hidden="true">13.2.</strong> sBTC 0.1</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/bootstrap.html"><strong aria-hidden="true">13.2.1.</strong> Boostrap</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/simple-flow.html"><strong aria-hidden="true">13.2.2.</strong> Simple flow</a></li></ol></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev-v2.html"><strong aria-hidden="true">13.3.</strong> sBTC 0.2</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-nakamoto.html"><strong aria-hidden="true">13.4.</strong> sBTC 1.0</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-nakamoto-v2.html"><strong aria-hidden="true">13.5.</strong> sBTC 1.1</a></li></ol></li><li class="chapter-item expanded "><a href="sbtc-roadmap.html"><strong aria-hidden="true">14.</strong> sBTC Roadmap</a></li><li class="chapter-item expanded affix "><li class="part-title">sBTC Compared</li><li class="chapter-item expanded "><a href="wbtc.html"><strong aria-hidden="true">15.</strong> Ethereum wBTC</a></li><li class="chapter-item expanded "><a href="powpeg.html"><strong aria-hidden="true">16.</strong> RSK PowPeg</a></li><li class="chapter-item expanded "><a href="lbtc.html"><strong aria-hidden="true">17.</strong> Liquid L-BTC</a></li><li class="chapter-item expanded "><a href="btcb.html"><strong aria-hidden="true">18.</strong> Avalanche BTC.b</a></li><li class="chapter-item expanded "><a href="tbtc.html"><strong aria-hidden="true">19.</strong> Threshold tBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="clarity-contracts-reference.html"><strong aria-hidden="true">20.</strong> Clarity Contracts</a></li><li class="chapter-item expanded "><a href="signer-api.html"><strong aria-hidden="true">21.</strong> Signer API</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">22.</strong> FAQ</a></li><li class="chapter-item expanded affix "><li class="part-title">Contribute</li><li class="chapter-item expanded "><a href="contribute.html"><strong aria-hidden="true">23.</strong> How to Contribute</a></li><li class="chapter-item expanded "><a href="contributors.html"><strong aria-hidden="true">24.</strong> Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">sBTC Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sbtc-requests-and-responses"><a class="header" href="#sbtc-requests-and-responses">sBTC Requests and Responses</a></h1>
<p>Requests to the sBTC system happen on the Bitcoin blockchain. In this chapter, we explain the two requests that users can create. We go over all information they must contain, and how the sBTC protocol responds to the requests.
For a more in-depth reference on how these requests are represented on the Bitcoin blockchain, see <a href="./sbtc-operations/bitcoin-transactions.html">Bitcoin Transactions</a>.</p>
<h2 id="deposit-request"><a class="header" href="#deposit-request">Deposit Request</a></h2>
<p>When a user wishes to deposit BTC in favor of receiving sBTC, they create a deposit request transaction.
This is a bitcoin transaction sending the requested deposit amount of BTC to the address provided by the Stackers.
In addition, the transaction must also specify to which Stacks address the sBTC should be minted.</p>
<p>The sBTC deposit request transaction will therefore contain the following data:</p>
<ul>
<li>Recipient address: The Stacks address which should receive the sBTC.</li>
<li>sBTC wallet address: The Bitcoin address maintaining custody of the deposited BTC.</li>
<li>Amount: The amount to deposit.</li>
</ul>
<h3 id="how-the-protocol-responds-to-a-deposit-request"><a class="header" href="#how-the-protocol-responds-to-a-deposit-request">How the protocol responds to a deposit request</a></h3>
<p>When a deposit request is mined on the Bitcoin blockchain, the next Stacks block must contain an sBTC mint transaction to the recipient address with the designated amount.
This is enforced on a consensus level in Stacks, so that Stacks blocks which do not respond to deposit requests are considered invalid by Miners.</p>
<h2 id="withdrawal-request"><a class="header" href="#withdrawal-request">Withdrawal Request</a></h2>
<p>An sBTC withdraw request is a bitcoin transaction containing data and two outputs.
The first output of this transaction marks the recipient address of the BTC to be withdrawn.
The second output of this transaction is a small fee subsidy to the stackers intended to cover the cost of fulfilling the withdrawal.
Finally, the transaction specifies the amount to be withdrawn and signs the amount and recipient address with the Stacks address from which the sBTC should be burned.</p>
<p>To summarize, the sBTC withdrawal transaction will contain the following data:</p>
<ul>
<li>Recipient address: The Bitcoin address which should receive the BTC.</li>
<li>sBTC wallet address: The Bitcoin address maintaining custody of the deposited BTC.</li>
<li>Amount: The amount to withdraw.</li>
<li>Sender address: The Stacks address holding the sBTC to be burned.</li>
</ul>
<h3 id="how-the-protocol-responds-to-a-withdrawal-request"><a class="header" href="#how-the-protocol-responds-to-a-withdrawal-request">How the protocol responds to a withdrawal request</a></h3>
<p>When a withdrawal request is mined on the Bitcoin blockchain, the next Stacks block must contain a sBTC burn transaction burning the requested amount from the sender address.
Once the withdrawal request is final<sup class="footnote-reference"><a href="#1">1</a></sup> on the Stacks blockchain, Stackers must fulfill the withdrawal request on the Bitcoin chain by creating a fulfillment transaction.</p>
<p>The fulfillment transaction is a bitcoin transaction sending the requested withdrawal amount to the designated recipient address specified in the Withdrawal request.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>Block finality is a property introduced in the <a href="https://stx.is/nakamoto">Nakamoto release</a> of Stacks, and a requirement for sBTC.</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="architecture.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="sbtc-operations/bitcoin-transactions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="architecture.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="sbtc-operations/bitcoin-transactions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid.min.js"></script>
        <script src="mermaid-init.js"></script>


    </div>
    </body>
</html>
